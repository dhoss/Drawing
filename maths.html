<html>
 <head>
  <script type="application/javascript">
  function draw() {
    var canvas = document.getElementById("canvas");
    var ctx = canvas.getContext("2d");
    ctx.save();
    var h = offset(2);
    var hour_x   = h[0] * 25;
    var hour_y   = h[1] * 25;
    ctx.fillStyle = "rgb(200,0,0)";
  
    circle(ctx);
    hour_hand(ctx, hour_x, hour_y);
    update_minute(ctx, 20);
    hour_ticks(ctx);
    ctx.restore();
  }

  function offset ( h ) {
    var x = Math.sin((h/12.0)*2.0*Math.PI);
    var y = Math.cos((h/12.0)*2.0*Math.PI);
    var coords = new Array(2);
    coords[0] = x;
    coords[1] = y;
    console.log("vars" + coords[0] + ", " + coords[1]);
    return coords;
  }
  
  function hour_ticks ( ctx ) {
    ctx.save();
    for ( var i=0; i<12; i++ ) {	  
      ctx.beginPath();
      var tick = offset(i);
      var x = tick[0];
      var y = tick[1];
      ctx.moveTo(150+(x*50),150-(y*50));            
      ctx.lineTo(150+(x*35),150-(y*35));
      ctx.stroke();
    }
    ctx.restore;
  }

  function circle ( ctx ) {
    ctx.beginPath();
    ctx.arc(150, 150, 50, 0, Math.PI*2, true);
    ctx.stroke();
    ctx.save();
  }

  function hour_hand ( ctx, hour_x, hour_y ) {
    draw_hand(ctx, 150, 150, hour_x, hour_y);    
  }

  function minute_hand ( ctx, minute_x, minute_y ) {
    draw_hand(ctx, 150, 150, minute_x, minute_y);
  }
    
  function draw_hand ( ctx, origin_x, origin_y, hand_x, hand_y ) {
    ctx.save();
    ctx.moveTo(origin_x, origin_y);
    ctx.lineTo(origin_x+hand_x, origin_y-hand_y);
    ctx.stroke();
    ctx.restore();
  }

  function update_minute ( ctx ) {
    var time = new Date();
    var m = offset((Math.PI/30)*time.getMinutes() + (Math.PI/1800)*time.getSeconds());
    var minute_x = m[0] * 50;
    var minute_y = m[1] * 50;
    minute_hand(ctx, minute_x, minute_y);
  }

</script>
</head>
<body onload="draw(); setInterval(draw(), 1000)">
<canvas id="canvas" width="300" height="300"></canvas>
</body>
</html>
